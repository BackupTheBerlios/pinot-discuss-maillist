<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-discuss] How much memory pinot-dbus-daemon should get ?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-discuss/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:pinot-discuss%40lists.berlios.de?Subject=Re%3A%20%5BPinot-discuss%5D%20How%20much%20memory%20pinot-dbus-daemon%20should%20get%20%3F&In-Reply-To=%3C6538c8c80803040522h463e98e8l8145d94bd7b4fa1f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000092.html">
   <LINK REL="Next"  HREF="000094.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-discuss] How much memory pinot-dbus-daemon should get ?</H1>
    <B>Fabrice Colin</B> 
    <A HREF="mailto:pinot-discuss%40lists.berlios.de?Subject=Re%3A%20%5BPinot-discuss%5D%20How%20much%20memory%20pinot-dbus-daemon%20should%20get%20%3F&In-Reply-To=%3C6538c8c80803040522h463e98e8l8145d94bd7b4fa1f%40mail.gmail.com%3E"
       TITLE="[Pinot-discuss] How much memory pinot-dbus-daemon should get ?">fabrice.colin at gmail.com
       </A><BR>
    <I>Tue Mar  4 14:22:05 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000092.html">[Pinot-discuss] How much memory pinot-dbus-daemon should get ?
</A></li>
        <LI>Next message: <A HREF="000094.html">[Pinot-discuss] How much memory pinot-dbus-daemon should get ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93">[ date ]</a>
              <a href="thread.html#93">[ thread ]</a>
              <a href="subject.html#93">[ subject ]</a>
              <a href="author.html#93">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Javier,

On Tue, Mar 4, 2008 at 7:57 PM, Javier Barroso &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/pinot-discuss">javibarroso at gmail.com</A>&gt; wrote:
&gt;<i> After than reindex my documents, top shows me 143 % of cpu use !
</I>&gt;<i>
</I>Your box is dual CPU/core, right ? ;-)
I wouldn't worry about the high CPU load. The daemon's priority is set
quite low (15 by default), so that it gives way to other applications
if need be.

&gt;<i> and  232m of memory:
</I>&gt;<i>
</I>&gt;<i>   PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
</I>&gt;<i>  8395 javi      35  15  363m 232m 6272 R  143 23.1 259:38.11 pinot-dbus-daem
</I>&gt;<i>
</I>The amount of memory used seems reasonable considering the size of the index.
Is ~/.pinot/daemon still 1.5Gb big or so ?
Could you run &quot;du -hsc ~/.pinot/daemon/*&quot; ? I'd like to see how big each file in
there actually is.

When building the index from scratch, memory usage will be higher. The good
news is that a large chunk is due to the index being mapped in memory. The
OS drops unmodified mmaped pages when running low on memory, so this
shouldn't cause any major issue.
Nevertheless, it should be possible to decrease this, at least when indexing is
done. I'll look into it for the next release.

&gt;<i> I have 30410 documents indexed, but with a few advisement about documents
</I>&gt;<i> which have root as owner. I chowned to me these documments and I killed
</I>&gt;<i> pinot-dbus-daemon, and start it again. 50 minutes later I have 75m in RES
</I>&gt;<i> column and 30% of cpu.
</I>&gt;<i>
</I>The daemon was still indexing the few files you had chown'ed ?

&gt;<i> Now I can see many &quot;'monitor file' errors&quot; (all are directories) from status
</I>&gt;<i> pinot console, and have no idea about the reason.
</I>&gt;<i>
</I>Do you have any other process running that may be using inotify ? Chances are
that Pinot wasn't able to place watches on these directories.

&gt;<i> Could I configure pinot to ignore symbolic links ?
</I>&gt;<i>
</I>That's not possible, but you can certainly add those directories to
the blacklist.
For instance, the pattern &quot;*/Desktop*&quot; will skip all directories whose
name start
with &quot;Desktop&quot;. See the README for details on how to do this.

Fabrice

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000092.html">[Pinot-discuss] How much memory pinot-dbus-daemon should get ?
</A></li>
	<LI>Next message: <A HREF="000094.html">[Pinot-discuss] How much memory pinot-dbus-daemon should get ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#93">[ date ]</a>
              <a href="thread.html#93">[ thread ]</a>
              <a href="subject.html#93">[ subject ]</a>
              <a href="author.html#93">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-discuss">More information about the Pinot-discuss
mailing list</a><br>
</body></html>
