<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-discuss] some test results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-discuss/2009-March/index.html" >
   <LINK REL="made" HREF="mailto:pinot-discuss%40lists.berlios.de?Subject=Re%3A%20%5BPinot-discuss%5D%20some%20test%20results&In-Reply-To=%3C6538c8c80903030520t7d6bd8f2tec50fe38f51804ca%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000209.html">
   <LINK REL="Next"  HREF="000211.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-discuss] some test results</H1>
    <B>Fabrice Colin</B> 
    <A HREF="mailto:pinot-discuss%40lists.berlios.de?Subject=Re%3A%20%5BPinot-discuss%5D%20some%20test%20results&In-Reply-To=%3C6538c8c80903030520t7d6bd8f2tec50fe38f51804ca%40mail.gmail.com%3E"
       TITLE="[Pinot-discuss] some test results">fabrice.colin at gmail.com
       </A><BR>
    <I>Tue Mar  3 14:20:57 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000209.html">[Pinot-discuss] some test results
</A></li>
        <LI>Next message: <A HREF="000211.html">[Pinot-discuss] some test results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#210">[ date ]</a>
              <a href="thread.html#210">[ thread ]</a>
              <a href="subject.html#210">[ subject ]</a>
              <a href="author.html#210">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi John,

On Tue, Mar 3, 2009 at 7:21 PM, John Werden &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/pinot-discuss">jwerden at hotpop.com</A>&gt; wrote:
&gt;<i> I gave it a try and memory usage is much more human and my system is
</I>&gt;<i> more responsive. But it's still way too high. Pinot ate 3GB shared and
</I>&gt;<i> 700 MB nonshared top. After too much of it went into swap, my system
</I>&gt;<i> didn't become unresponsive, but it was still too much to make a clean
</I>&gt;<i> shutdown, let alone kill all the bigger programs which got swapped out
</I>&gt;<i> with pinot, because 99% cpu usage was in wa.
</I>&gt;<i>
</I>What happened at shutdown ?

I am starting to think you may be trying to index too many documents
in one go, with too few resources ;-)
More seriously, if the final index size is around 1.6Gb it may not be
unrealistic for memory usage to be around 3+ Gb. Did 0.90 (release)
and older versions take much more ?

I seem to remember your system has 1Gb of memory, and your corpus has
400k documents. I couldn't find the total on-disk size of your corpus
in my mail archive, but you would probably be better off staging
indexing in smaller chunks, restarting the daemon between each stage,
and running xapian-compact on the final index.

I am not saying I am giving up on this. I do want to keep a lid on
resource consumption.

Before releasing 0.91, I'll modify the indexing code to only consider
the first 5Mb. I am thinking I should also add a mean to disable
automatic index upgrades for cases like yours where reindexing means
days, and think how indexing could be staged automatically based on
memory usage.

By the way, did the log file have many messages of the type
&quot;ExternalFilter::run_command: stopping at &quot; ?

Fabrice

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000209.html">[Pinot-discuss] some test results
</A></li>
	<LI>Next message: <A HREF="000211.html">[Pinot-discuss] some test results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#210">[ date ]</a>
              <a href="thread.html#210">[ thread ]</a>
              <a href="subject.html#210">[ subject ]</a>
              <a href="author.html#210">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-discuss">More information about the Pinot-discuss
mailing list</a><br>
</body></html>
